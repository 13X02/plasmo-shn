var ce=Object.create;var P=Object.defineProperty;var Be=Object.getOwnPropertyDescriptor;var me=Object.getOwnPropertyNames;var be=Object.getPrototypeOf,he=Object.prototype.hasOwnProperty;var ve=(o,s)=>{for(var m in s)P(o,m,{get:s[m],enumerable:!0})},te=(o,s,m,i)=>{if(s&&typeof s=="object"||typeof s=="function")for(let y of me(s))!he.call(o,y)&&y!==m&&P(o,y,{get:()=>s[y],enumerable:!(i=Be(s,y))||i.enumerable});return o};var K=(o,s,m)=>(m=o!=null?ce(be(o)):{},te(s||!o||!o.__esModule?P(m,"default",{value:o,enumerable:!0}):m,o)),Ne=o=>te(P({},"__esModule",{value:!0}),o);var Re={};ve(Re,{default:()=>Ce});module.exports=Ne(Re);var fe=require("@parcel/plugin");var W=typeof globalThis.process<"u"?globalThis.process.argv:[];var ne=()=>typeof globalThis.process<"u"?globalThis.process.env:{};var Ie=new Set(W),de=o=>Ie.has(o),Ke=W.filter(o=>o.startsWith("--")&&o.includes("=")).map(o=>o.split("=")).reduce((o,[s,m])=>(o[s]=m,o),{});var Me=de("--dry-run"),U=()=>de("--verbose")||ne().VERBOSE==="true",xe=U();var Ae=(o="",...s)=>console.log(o.padEnd(9),"|",...s);var Se=0,oe=(...o)=>U()&&Ae(`\u{1F7E1} ${Se++}`,...o);var z=require("@parcel/graph"),T=require("@parcel/utils"),A=K(require("assert")),g=K(require("nullthrows"));function X(o,s){return o.type===s.type&&o.env.context===s.env.context&&o.bundleBehavior==null&&s.bundleBehavior==null}var j=K(require("nullthrows"));function k(o){if(o.asset==null)return{uniqueKey:o.uniqueKey,assets:new Set,internalizedAssetIds:[],mainEntryAsset:null,size:0,sourceBundles:new Set,target:o.target,type:(0,j.default)(o.type),env:(0,j.default)(o.env),needsStableName:Boolean(o.needsStableName),bundleBehavior:o.bundleBehavior};let s=(0,j.default)(o.asset);return{uniqueKey:o.uniqueKey,assets:new Set([s]),internalizedAssetIds:[],mainEntryAsset:s,size:s.stats.size,sourceBundles:new Set,target:o.target,type:o.type??s.type,env:o.env??s.env,needsStableName:Boolean(o.needsStableName),bundleBehavior:o.bundleBehavior??s.bundleBehavior}}var le=K(require("nullthrows"));function Y(o,s){return s.getNodeIdsConnectedTo(s.getNodeIdByContentKey(o.id)).map(m=>(0,le.default)(s.getNode(m)))}var $=K(require("assert")),H=K(require("nullthrows"));function J(o,s,m){let i=(0,H.default)(o.getNode(s));(0,$.default)(i!=="root");for(let y of i.assets){m.set(y,m.get(y).filter(N=>!N.includes(i)));for(let N of i.sourceBundles){let G=(0,H.default)(o.getNode(N));(0,$.default)(G!=="root"),G.assets.add(y),G.size+=y.stats.size}}o.removeNode(s)}var V={sync:1,parallel:2,lazy:3};function re(o,s,m){let i=new Map,y=new Map,N=new z.ContentGraph,G=new T.DefaultMap(()=>[]),n=new z.Graph,p=[],S={parallel:1,lazy:2},b=new z.ContentGraph,I=new Set,v=new z.ContentGraph,D=(0,g.default)(b.addNode("root")),M=(0,g.default)(n.addNode("root"));b.setRootNodeId(D),n.setRootNodeId(M);for(let[e,d]of m){let f=k({asset:e,target:(0,g.default)(d.target),needsStableName:d.isEntry}),l=n.addNode(f);y.set(e.id,l),i.set(e,[l,l]),b.addEdge(D,b.addNodeByContentKey(e.id,e)),n.addEdge(M,l),N.addEdge(N.addNodeByContentKeyIfNeeded(d.id,{value:d,type:"dependency"}),N.addNodeByContentKeyIfNeeded(String(l),{value:f,type:"bundle"}),V[d.priority]),I.add(l)}let q=[],_=new Set;o.traverse({enter(e,d,f){if(e.type==="asset"){if(d?.type==="dependency"&&d?.value.isEntry&&!m.has(e.value))return f.skipChildren(),e;q.push(e.value);let l=i.get(e.value);l&&l[0]===l[1]?p.push([e.value,l[0]]):l&&p.push([e.value,p[p.length-1][1]])}else if(e.type==="dependency"){if(d==null)return e;let l=e.value;if(o.isDependencySkipped(l))return f.skipChildren(),e;(0,A.default)(d?.type==="asset");let B=d.value,a=o.getDependencyAssets(l);if(a.length===0)return e;for(let r of a){if(l.priority==="lazy"||r.bundleBehavior==="isolated"){let t=y.get(r.id),u;if(t==null){let h=(0,g.default)(n.getNode(p[0][1]));(0,A.default)(h!=="root"),u=k({asset:r,target:h.target,needsStableName:l.bundleBehavior==="inline"||r.bundleBehavior==="inline"?!1:l.isEntry||l.needsStableName,bundleBehavior:l.bundleBehavior??r.bundleBehavior}),t=n.addNode(u),y.set(r.id,t),i.set(r,[t,t]),I.add(t),n.addEdge(M,t)}else u=(0,g.default)(n.getNode(t)),(0,A.default)(u!=="root"),l.bundleBehavior==="isolated"&&u.bundleBehavior==null&&(u.bundleBehavior=l.bundleBehavior);N.addEdge(N.addNodeByContentKeyIfNeeded(l.id,{value:l,type:"dependency"}),N.addNodeByContentKeyIfNeeded(String(t),{value:u,type:"bundle"}),V[l.priority]);continue}if(B.type!==r.type||l.priority==="parallel"||r.bundleBehavior==="inline"){let[t,u]=(0,g.default)(p[p.length-1]),h=(0,g.default)(n.getNode(u));(0,A.default)(h!=="root");let c,R=(0,g.default)(i.get(t))[0],w=(0,g.default)(n.getNode(R));(0,A.default)(w!=="root");let E;c=y.get(r.id);let F=(0,g.default)(h.mainEntryAsset);m.has(F)&&X(F,r)&&l.bundleBehavior==null&&(c=u),c==null?(E=k({asset:r,type:r.type,env:r.env,bundleBehavior:l.bundleBehavior??r.bundleBehavior,target:w.target,needsStableName:r.bundleBehavior==="inline"||l.bundleBehavior==="inline"||l.priority==="parallel"&&!l.needsStableName?!1:w.needsStableName}),c=n.addNode(E),B.type!==r.type&&_.add(c)):(E=n.getNode(c),(0,A.default)(E!=null&&E!=="root"),l.bundleBehavior==="isolated"&&E.bundleBehavior==null&&(E.bundleBehavior=l.bundleBehavior)),y.set(r.id,c),i.set(r,[c,u]),n.addEdge(R,c),c!=u&&N.addEdge(N.addNodeByContentKeyIfNeeded(l.id,{value:l,type:"dependency"}),N.addNodeByContentKeyIfNeeded(String(c),{value:E,type:"bundle"}),V.parallel),G.get(r).push([l,E]);continue}}}return e},exit(e){p[p.length-1]?.[0]===e.value&&p.pop()}},void 0);for(let[e,d]of n.nodes){if(!_.has(e)||d==="root")continue;let f=Z(e);for(let[l,B]of n.nodes)if(d!=="root"&&B!=="root"&&d!==B&&_.has(l)&&X(d,B)){let a=Z(l);if((0,T.setEqual)(a,f)){let r=!0;for(let t of N.getNodeIdsConnectedTo(N.getNodeIdByContentKey(String(l)),z.ALL_EDGE_TYPES)){let u=N.getNode(t);if(u&&u.type==="dependency"&&u.value.specifierType==="url"){r=!1;continue}}if(!r)continue;ge(e,l)}}}for(let[e]of i)m.has(e)||b.addNodeByContentKey(e.id,e);for(let[e]of i){let d=v.addNodeByContentKeyIfNeeded(e.id,e);o.traverse((f,l,B)=>{if(f.value===e)return;if(f.type==="dependency"){let t=f.value;if(N.hasContentKey(t.id)&&t.priority!=="sync"){let u=o.getDependencyAssets(t);if(u.length===0)return;(0,A.default)(u.length===1);let h=u[0],c=(0,g.default)(n.getNode((0,g.default)(y.get(h.id))));c!=="root"&&c.bundleBehavior==null&&!c.env.isIsolated()&&c.env.context===e.env.context&&b.addEdge(b.getNodeIdByContentKey(e.id),b.getNodeIdByContentKey(h.id),t.priority==="parallel"?S.parallel:S.lazy)}t.priority!=="sync"&&B.skipChildren();return}let a=f.value;if(a.bundleBehavior!=null||e.type!==a.type){e.type!==a.type&&!i.has(a)&&v.addNodeByContentKeyIfNeeded(f.value.id,f.value),B.skipChildren();return}let r=v.addNodeByContentKeyIfNeeded(f.value.id,f.value);v.addEdge(d,r)},e)}let L=new Map;for(let e of m.keys())L.set(e,new Set);for(let e of b.topoSort(z.ALL_EDGE_TYPES)){let d=b.getNode(e);if(d==="root")continue;(0,A.default)(d!=null);let f=(0,g.default)(i.get(d))[1],l;if(d.bundleBehavior==="isolated")l=new Set;else{l=new Set(L.get(d));for(let r of[f,...n.getNodeIdsConnectedFrom(f)]){let t=(0,g.default)(n.getNode(r));if((0,A.default)(t!=="root"),t.bundleBehavior==null)for(let u of t.assets){let h=v.getNodeIdsConnectedFrom(v.getNodeIdByContentKey(u.id)).map(c=>(0,g.default)(v.getNode(c)));for(let c of[u,...h])l.add(c)}}}let B=b.getNodeIdsConnectedFrom(e,z.ALL_EDGE_TYPES),a=new Set;for(let r of B){let t=b.getNode(r);if((0,A.default)(t!=="root"&&t!=null),O(t).bundleBehavior!=null)continue;let h=b.hasEdge(e,r,S.parallel),c=L.get(t),R=h?(0,T.setUnion)(a,l):l;if(c!=null?(0,T.setIntersect)(c,R):L.set(t,new Set(R)),h){let w=v.getNodeIdsConnectedFrom(v.getNodeIdByContentKey(t.id)).map(E=>(0,g.default)(v.getNode(E)));a=(0,T.setUnion)(a,w),a.add(t)}}}for(let[e,d]of b.nodes){if(d==="root")continue;let f=b.getNodeIdsConnectedTo(e,z.ALL_EDGE_TYPES).map(B=>(0,g.default)(b.getNode(B))),l=O(d).bundleBehavior!=="isolated";if(f.length!==0){for(let B of f){if(B==="root"){l=!1;continue}if(v.hasEdge(v.getNodeIdByContentKey(B.id),v.getNodeIdByContentKey(d.id))||L.get(B)?.has(d)){let a=n.getNode((0,g.default)(y.get(B.id)));(0,A.default)(a!=null&&a!=="root"),a.internalizedAssetIds.push(d.id)}else l=!1}l&&Q(d)}}for(let e of q){let d=Y(e,v).reverse(),f=[],l=[];for(let a of d)m.has(a)||!a.isBundleSplittable||i.get(a)&&(O(a).needsStableName||O(a).bundleBehavior==="isolated")?f.push(a):l.push(a);d=l,d=d.filter(a=>!L.get(a)?.has(e));let B=new Set;for(let a of d){let r=(0,g.default)(y.get(a.id));if(a.env.isIsolated())continue;let t=y.get(e.id);if(t!=null){B.add(a),n.addEdge(r,t);let u=n.getNode(t);(0,A.default)(u!=="root"&&u!=null),u.sourceBundles.add(r)}else for(let u of d){if(a===u)continue;if(Y(u,v).filter(c=>!L.get(c)?.has(u)).includes(a)){let c=(0,g.default)(y.get(u.id));B.add(a),n.addEdge((0,g.default)(y.get(a.id)),c);let R=n.getNode(c);(0,A.default)(R!=="root"&&R!=null),R.sourceBundles.add(r)}}}d=d.filter(a=>!B.has(a));for(let a of f){let r=(0,g.default)(y.get(a.id)),t=(0,g.default)(n.getNode(r));(0,A.default)(t!=="root"),t.assets.add(e),t.size+=e.stats.size}if(d.length>s.minBundles){let a=d.map(h=>(0,g.default)(y.get(h.id))),r=d.map(h=>h.id).join(","),t=y.get(r),u;if(t==null){let h=(0,g.default)(n.getNode(a[0]));(0,A.default)(h!=="root"),u=k({target:h.target,type:h.type,env:h.env}),u.sourceBundles=new Set(a);let c=new Set(h.internalizedAssetIds);for(let R of a){let w=(0,g.default)(n.getNode(R));(0,A.default)(w!=="root"),w!==h&&(0,T.setIntersect)(c,new Set(w.internalizedAssetIds))}u.internalizedAssetIds=[...c],t=n.addNode(u),y.set(r,t)}else u=(0,g.default)(n.getNode(t)),(0,A.default)(u!=="root");u.assets.add(e),u.size+=e.stats.size;for(let h of a)t!==h&&n.addEdge(h,t);N.addNodeByContentKeyIfNeeded(String(t),{value:u,type:"bundle"})}else if(d.length<=s.minBundles)for(let a of d){let r=(0,g.default)(n.getNode((0,g.default)(y.get(a.id))));(0,A.default)(r!=="root"),r.assets.add(e),r.size+=e.stats.size}}for(let[e,d]of n.nodes)d!=="root"&&d.sourceBundles.size>0&&d.mainEntryAsset==null&&d.size<s.minBundleSize&&J(n,e,G);for(let e of n.getNodeIdsConnectedFrom(D)){let d=e,f=ye(d);if(f.length>s.maxParallelRequests){let l=f.filter(r=>{let t=(0,g.default)(n.getNode(r));return t!=="root"&&t.sourceBundles.size>0&&d!=r}),B=f.length,a=l.map(r=>({id:r,bundle:(0,g.default)(n.getNode(r))})).map(({id:r,bundle:t})=>((0,A.default)(t!=="root"),{id:r,bundle:t})).sort((r,t)=>t.bundle.size-r.bundle.size);for(;a.length>0&&B>s.maxParallelRequests;){let r=a.pop(),t=r.bundle,u=r.id,h=[...t.sourceBundles].filter(c=>f.includes(c));for(let c of h){let R=(0,g.default)(n.getNode(c));(0,A.default)(R!=="root"),t.sourceBundles.delete(c);for(let E of t.assets)R.assets.add(E),R.size+=E.stats.size;for(let E of n.getNodeIdsConnectedFrom(u)){let F=n.getNode(E);(0,A.default)(F!=="root"&&F!=null),F.sourceBundles.add(c),n.addEdge(c,E)}if(n.getNodeIdsConnectedTo(u).length<=2&&t.mainEntryAsset==null){J(n,u,G);break}else n.removeEdge(c,u)}B--}}}function Q(e){n.removeNode((0,g.default)(y.get(e.id))),i.delete(e),y.delete(e.id),b.hasContentKey(e.id)&&b.removeNode(b.getNodeIdByContentKey(e.id))}function Z(e){let d=new Set;return n.traverseAncestors(e,f=>{n.getNodeIdsConnectedTo(f).includes(n.rootNodeId)&&d.add(f)}),d}function ye(e){let d=[];return n.traverse(f=>{d.push(f)},e),d}function ge(e,d){let f=(0,g.default)(n.getNode(e)),l=(0,g.default)(n.getNode(d));(0,A.default)(f!=="root"&&l!=="root");let B=(0,g.default)(l.mainEntryAsset),a=(0,g.default)(f.mainEntryAsset),r=(0,g.default)(i.get(a))[1];for(let t of l.assets)t!==B&&(i.has(t)&&(i.set(t,[e,r]),y.set(t.id,e)),ee(t,l,f));for(let t of l.assets)f.assets.add(t),f.size+=t.stats.size;for(let t of N.getNodeIdsConnectedTo(N.getNodeIdByContentKey(String(d)),z.ALL_EDGE_TYPES))N.replaceNodeIdsConnectedTo(t,[N.getNodeIdByContentKey(String(e))]);for(let t of G.get(B))t[1]=f;for(let t of n.getNodeIdsConnectedTo(d))n.addEdge(t,e);ee(B,l,f),Q(B),i.set(B,[e,r]),y.set(B.id,e),i.delete(B),y.delete(B.id)}function ee(e,d,f){let l=G.get(e).map(B=>B[1]==d?[B[0],f]:B);G.set(e,l)}function O(e){let d=n.getNode((0,g.default)(i.get(e))[0]);return(0,A.default)(d!=="root"&&d!=null),d}return{bundleGraph:n,dependencyBundleGraph:N,bundleGroupBundleIds:I,assetReference:G}}var se=require("@parcel/graph"),x=K(require("assert")),C=K(require("nullthrows"));function ae(o,s){let m=new Map,{bundleGraph:i,dependencyBundleGraph:y,bundleGroupBundleIds:N}=o,G=new Map;for(let[n,p]of i.nodes){if(p==="root")continue;let S=p.mainEntryAsset,b,I;if(N.has(n)){let v=y.getNodeIdsConnectedTo(y.getNodeIdByContentKey(String(n)),se.ALL_EDGE_TYPES).map(D=>{let M=(0,C.default)(y.getNode(D));return(0,x.default)(M.type==="dependency"),M.value});for(let D of v)b=s.createBundleGroup(D,p.target);(0,x.default)(b),G.set(n,b),I=(0,C.default)(s.createBundle({entryAsset:(0,C.default)(S),needsStableName:p.needsStableName,bundleBehavior:p.bundleBehavior,target:p.target})),s.addBundleToBundleGroup(I,b)}else p.sourceBundles.size>0?I=(0,C.default)(s.createBundle({uniqueKey:[...p.assets].map(v=>v.id).join(",")+[...p.sourceBundles].join(","),needsStableName:p.needsStableName,bundleBehavior:p.bundleBehavior,type:p.type,target:p.target,env:p.env})):p.uniqueKey!=null?I=(0,C.default)(s.createBundle({uniqueKey:p.uniqueKey,needsStableName:p.needsStableName,bundleBehavior:p.bundleBehavior,type:p.type,target:p.target,env:p.env})):((0,x.default)(S!=null),I=(0,C.default)(s.createBundle({entryAsset:S,needsStableName:p.needsStableName,bundleBehavior:p.bundleBehavior,target:p.target})));m.set(p,I);for(let v of p.assets)s.addAssetToBundle(v,I)}for(let[,n]of i.nodes){if(n==="root")continue;let p=(0,C.default)(m.get(n));for(let S of n.internalizedAssetIds){let b=s.getIncomingDependencies(s.getAssetById(S));for(let I of b)I.priority==="lazy"&&I.specifierType!=="url"&&p.hasDependency(I)&&s.internalizeAsyncDependency(p,I)}}i.traverse((n,p,S)=>{if(i.getNode(n)==="root")return;S.skipChildren();let I=i.getNodeIdsConnectedFrom(n),v=(0,C.default)(i.getNode(n));(0,x.default)(v!=="root");let D=(0,C.default)(m.get(v));for(let M of I){let q=(0,C.default)(i.getNode(M));(0,x.default)(q!=="root");let _=(0,C.default)(m.get(q));s.createBundleReference(D,_)}});for(let[n,p]of o.assetReference)for(let[S,b]of p){let I=(0,C.default)(m.get(b));s.createAssetReference(S,n,I)}for(let{from:n,to:p}of i.getAllEdges()){let S=(0,C.default)(i.getNode(n));if(S==="root")continue;(0,x.default)(S!=="root");let b=(0,C.default)(m.get(S)),I=(0,C.default)(i.getNode(p));if(I==="root")continue;(0,x.default)(I!=="root");let v=(0,C.default)(m.get(I));s.createBundleReference(b,v)}}var ue=require("@parcel/utils"),ie=K(require("assert"));function pe(o){let s=new ue.DefaultMap(()=>new Map);return o.traverse({enter(m,i,y){return m.type!=="asset"||((0,ie.default)(i!=null&&i.type==="dependency"&&i.value.isEntry&&i.value.target!=null),s.get(i.value.target.distDir).set(m.value,i.value),y.skipChildren()),m}},void 0),s}var Ee={minBundles:1e9,minBundleSize:1e6,maxParallelRequests:20},Ce=new fe.Bundler({loadConfig(){return Ee},bundle({bundleGraph:o,config:s}){oe("@plasmohq/parcel-bundler");let m=pe(o),i=[];for(let y of m.values())i.push(re(o,s,y));for(let y of i)ae(y,o)},optimize(){}});0&&(module.exports={});
