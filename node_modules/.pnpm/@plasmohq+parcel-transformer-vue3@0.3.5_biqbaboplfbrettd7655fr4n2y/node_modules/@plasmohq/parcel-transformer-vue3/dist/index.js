var T=Object.create;var M=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var F=(e,t)=>{for(var r in t)M(e,r,{get:t[r],enumerable:!0})},v=(e,t,r,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of q(t))!A.call(e,a)&&a!==r&&M(e,a,{get:()=>t[a],enumerable:!(u=U(t,a))||u.enumerable});return e};var _=(e,t,r)=>(r=e!=null?T(x(e)):{},v(t||!e||!e.__esModule?M(r,"default",{value:e,enumerable:!0}):r,e)),I=e=>v(M({},"__esModule",{value:!0}),e);var V={};F(V,{default:()=>B});module.exports=I(V);var n=_(require("@parcel/diagnostic")),S=require("@parcel/plugin"),O=_(require("@parcel/source-map")),R=require("@parcel/utils"),g=_(require("@vue/compiler-sfc")),b=_(require("nullthrows")),d=require("path"),E=_(require("semver")),N=_(require("@plasmohq/consolidate")),K=/\.module\./,B=new S.Transformer({async loadConfig({config:e}){let t=await e.getConfig([".vuerc",".vuerc.json",".vuerc.js","vue.config.js"],{packageKey:"vue"}),r={};if(t&&(e.invalidateOnStartup(),r=t.contents,typeof r!="object"))throw new n.default({diagnostic:{message:"Vue config should be an object.",origin:"@parcel/transformer-vue"}});return{customBlocks:r.customBlocks||{},filePath:t&&t.filePath,compilerOptions:r.compilerOptions||{}}},canReuseAST({ast:e}){return e.type==="vue"&&E.default.satisfies(e.version,"^3.0.0")},async parse({asset:e,options:t}){let r=await e.getCode(),u=g.parse(r,{sourceMap:!0,filename:e.filePath});if(u.errors.length)throw new n.default({diagnostic:u.errors.map(w=>k(w,e.filePath))});let a=u.descriptor,p=(0,R.hashObject)({filePath:e.filePath,source:t.mode==="production"?r:null}).slice(-6);return{type:"vue",version:"3.0.0",program:{...a,script:a.script!=null||a.scriptSetup!=null?g.compileScript(a,{id:p,isProd:t.mode==="production"}):null,id:p}}},async transform({asset:e,options:t,resolve:r,config:u}){let{template:a,script:p,styles:w,customBlocks:s,id:f}=(0,b.default)(await e.getAST()).program,$="data-v-"+f,h=f+"-hmr",o=(0,d.basename)(e.filePath);return e.pipeline!=null?C({asset:e,template:a,script:p,styles:w,customBlocks:s,config:u,basePath:o,options:t,resolve:r,id:f,hmrId:h}):[{type:"js",uniqueKey:e.id+"-glue",content:`
 let script;
 let initialize = () => {
   script = ${p!=null?`require('script:./${o}');
   if (script.__esModule) script = script.default`:"{}"};
   ${a!=null?`script.render = require('template:./${o}').render;`:""}
   ${w.length!==0?`script.__cssModules = require('style:./${o}').default;`:""}
   ${s!=null?`require('custom:./${o}').default(script);`:""}
   script.__scopeId = '${$}';
   script.__file = ${JSON.stringify(t.mode==="production"?o:e.filePath)};
 };
 initialize();
 ${t.hmrOptions?`if (module.hot) {
   script.__hmrId = '${h}';
   module.hot.accept(() => {
     setTimeout(() => {
       initialize();
       if (!__VUE_HMR_RUNTIME__.createRecord('${h}', script)) {
         __VUE_HMR_RUNTIME__.reload('${h}', script);
       }
     }, 0);
   });
 }`:""}
 export default script;`}]}});function k(e,t){if(typeof e=="string")return{message:e,origin:"@parcel/transformer-vue",filePath:t};let r={message:(0,n.escapeMarkdown)(e.message),origin:"@parcel/transformer-vue",name:e.name,stack:e.stack};return e.loc&&(r.codeFrames=[{codeHighlights:[{start:{line:e.loc.start.line+e.loc.start.offset,column:e.loc.start.column},end:{line:e.loc.end.line+e.loc.end.offset,column:e.loc.end.column}}]}]),r}async function C({asset:e,template:t,script:r,styles:u,customBlocks:a,config:p,basePath:w,options:s,resolve:f,id:$,hmrId:h}){switch(e.pipeline){case"template":{t.src&&(t.content=(await s.inputFS.readFile(await f(e.filePath,t.src))).toString(),t.lang=(0,d.extname)(t.src).slice(1));let o=t.content;if(t.lang&&!["htm","html"].includes(t.lang)){let c={},l=N.default[t.lang];switch(t.lang){case"pug":c.doctype="html";break}if(!l)throw new n.default({diagnostic:{message:(0,n.md)([`Unknown template language: "${t.lang}"`]),origin:"@parcel/transformer-vue"}});o=await l.render(o,c)}let m=g.compileTemplate({filename:e.filePath,source:o,inMap:t.src?void 0:t.map,scoped:u.some(c=>c.scoped),compilerOptions:{...p.compilerOptions,bindingMetadata:r?r.bindings:void 0},isProd:s.mode==="production",id:$});if(m.errors.length)throw new n.default({diagnostic:m.errors.map(c=>k(c,e.filePath))});return[{type:"js",uniqueKey:e.id+"-template",...!t.src&&e.env.sourceMap&&{map:j(m.map,s.projectRoot)},content:m.code+`
 ${s.hmrOptions?`if (module.hot) {
   module.hot.accept(() => {
     __VUE_HMR_RUNTIME__.rerender('${h}', render);
   })
 }`:""}`}]}case"script":{r.src&&(r.content=(await s.inputFS.readFile(await f(e.filePath,r.src))).toString(),r.lang=(0,d.extname)(r.src).slice(1));let o;switch(r.lang||"js"){case"javascript":case"js":o="js";break;case"jsx":o="jsx";break;case"typescript":case"ts":o="ts";break;case"tsx":o="tsx";break;case"coffeescript":case"coffee":o="coffee";break;default:throw new n.default({diagnostic:{message:(0,n.md)([`Unknown script language: "${r.lang}"`]),origin:"@parcel/transformer-vue"}})}return[{type:o,uniqueKey:e.id+"-script",content:r.content,...!r.src&&e.env.sourceMap&&{map:j(r.map,s.projectRoot)}}]}case"style":{let o={},m=await Promise.all(u.map(async(i,c)=>{switch(i.src&&(i.content=(await s.inputFS.readFile(await f(e.filePath,i.src))).toString(),i.module||(i.module=K.test(i.src)),i.lang=(0,d.extname)(i.src).slice(1)),i.lang){case"less":case"stylus":case"styl":case"scss":case"sass":case"css":case void 0:break;default:throw new n.default({diagnostic:{message:(0,n.md)([`Unknown style language: "${i.lang}"`]),origin:"@parcel/transformer-vue"}})}let l=await g.compileStyleAsync({filename:e.filePath,source:i.content,modules:i.module,preprocessLang:i.lang||"css",scoped:i.scoped,inMap:i.src?void 0:i.map,isProd:s.mode==="production",id:$});if(l.errors.length)throw new n.default({diagnostic:l.errors.map(P=>k(P,e.filePath))});let y={type:"css",content:l.code,sideEffects:!0,...!i.src&&e.env.sourceMap&&{map:j(i.map,s.projectRoot)},uniqueKey:e.id+"-style"+c};return l.modules&&(typeof i.module=="boolean"&&(i.module="$style"),o[i.module]={...o[i.module],...l.modules}),y}));return Object.keys(o).length!==0&&m.push({type:"js",uniqueKey:e.id+"-cssModules",content:`
 import {render} from 'template:./${w}';
 let cssModules = ${JSON.stringify(o)};
 ${s.hmrOptions?`if (module.hot) {
   module.hot.accept(() => {
     __VUE_HMR_RUNTIME__.rerender('${h}', render);
   });
 };`:""}
 export default cssModules;`}),m}case"custom":{let o=[];if(!p)return[];let m=new Set;for(let i of a){let{type:c,src:l,content:y,attrs:P}=i;if(!p.customBlocks[c])throw new n.default({diagnostic:{message:(0,n.md)([`No preprocessor found for block type ${c}`]),origin:"@parcel/transformer-vue"}});l&&(y=(await s.inputFS.readFile(await f(e.filePath,l))).toString()),o.push([c,y,P]),m.add(c)}return[{type:"js",uniqueKey:e.id+"-custom",content:`
 let NOOP = () => {};
 ${(await Promise.all([...m].map(async i=>`import p${i} from './${(0,d.relative)((0,d.dirname)(e.filePath),await f((0,b.default)(p.filePath),p.customBlocks[i]))}';
 if (typeof p${i} !== 'function') {
   p${i} = NOOP;
 }`))).join(`
`)}
 export default script => {
   ${o.map(([i,c,l])=>`  p${i}(script, ${JSON.stringify(c)}, ${JSON.stringify(l)});`).join(`
`)}
 }`}]}default:return[]}}function j(e,t){let r=new O.default(t);return r.addVLQMap(e),r}0&&(module.exports={});
